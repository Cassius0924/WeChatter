# WeChatter

## ä»‹ç»

åŸºäº [wechatbot-webhook](https://github.com/danni-cool/wechatbot-webhook) çš„å¾®ä¿¡æœºå™¨äººğŸ’¬ï¼Œæ”¯æŒ GPT é—®ç­”ã€çƒ­æœã€å¤©æ°”é¢„æŠ¥ã€æ¶ˆæ¯è½¬å‘ã€Webhookæé†’ç­‰åŠŸèƒ½ã€‚

## å¿«é€Ÿå¼€å§‹

### è¿è¡Œ wechatbot-webhook

1. æ‹‰å– Docker é•œåƒ

```bash
docker pull dannicool/docker-wechatbot-webhook
```

2. è¿è¡Œ Docker

```bash
docker run -d \
--name wxBotWebhook \
-p 3001:3001 \
-e LOGIN_API_TOKEN="<Token>" \
-e RECVD_MSG_API="http://<å†…ç½‘IP>:<æ¥æ”¶æ¶ˆæ¯ç«¯å£>/receive_msg" \
dannicool/docker-wechatbot-webhook
```

- `<Token>`ï¼šç™»å½•ä»¤ç‰Œï¼ˆä¸æ˜¯å¯†ç ï¼‰ï¼Œè‡ªå·±è®¾ç½®ä¸€ä¸ªå¥½è®°çš„ã€‚
- `<å†…ç½‘IP>`ï¼šå¡«å…¥æœåŠ¡å™¨çš„**å†…ç½‘IP**ã€‚å¦‚æœæ˜¯åœ¨è‡ªå·±ç”µè„‘ï¼Œåˆ™å¡«å…¥ `127.0.0.1`ã€‚
- `<æ¥æ”¶æ¶ˆæ¯ç«¯å£>`ï¼šè®¾ç½®ä¸€ä¸ªæ¥æ”¶æ¶ˆæ¯çš„ç«¯å£ï¼Œæ­¤é¡¹ç›®ä¸­é»˜è®¤ä¸º `4000`ã€‚

3. ç™»å½•å¾®ä¿¡

ä½¿ç”¨ä¸‹é¢å‘½ä»¤æŸ¥çœ‹ Docker æ—¥å¿—ä¸­çš„å¾®ä¿¡äºŒç»´ç ï¼Œæ‰«ç ç™»å½•å¾®ä¿¡ã€‚

```bash
docker logs -f wxBotWebhook
```

### å¯åŠ¨æœåŠ¡å™¨

1. ä¸‹è½½æºä»£ç 

```bash
git clone https://github.com/Cassius0924/WeChatter
cd WeChatter
```

2. å¤åˆ¶å¹¶ç¼–è¾‘é…ç½®æ–‡ä»¶

```bash
cp config.ini.example config.ini
vim config.ini
```

3. å¯åŠ¨ WeChatter

```bash
python3 main.py
```

4. æµ‹è¯•æœºå™¨äºº

ä½¿ç”¨å¦ä¸€ä¸ªå¾®ä¿¡ç»™æœºå™¨äººå‘é€ `/help` æŒ‡ä»¤ã€‚

## æ”¯æŒçš„å‘½ä»¤

- [x] GPTé—®ç­”ï¼ŒåŸºäº [Copilot-GPT4-Server](https://github.com/aaamoon/copilot-gpt4-service)
- [x] è·å–Bç«™çƒ­æœ
- [x] è·å–çŸ¥ä¹çƒ­æœ
- [x] è·å–å¾®åšçƒ­æœ
- [x] è·å–æŠ–éŸ³çƒ­æœ
- [x] è·å–GitHubè¶‹åŠ¿
- [x] å•è¯/è¯è¯­ç¿»è¯‘
- [x] è·å–å°‘æ•°æ´¾æ—©æŠ¥
- [x] è·å–å†å²ä¸Šçš„ä»Šå¤©
- [x] äºŒç»´ç ç”Ÿæˆå™¨
- [x] å¾…åŠæ¸…å•ï¼ˆTODOï¼‰
- [x] è·å–äººæ°‘æ—¥æŠ¥PDF
- [x] è·å–å¤©æ°”é¢„æŠ¥

> [!TIP]
> æ›´å¤šå‘½ä»¤ä½¿ç”¨ `/help` å‘½ä»¤æŸ¥çœ‹ã€‚

## æ”¯æŒçš„åŠŸèƒ½

- [x] æ¶ˆæ¯è½¬å‘ï¼Œéœ€[é…ç½®](#%EF%B8%8F-message-forwarding-é…ç½®)
- [x] å¤©æ°”é¢„æŠ¥å®šæ—¶æ¨é€ï¼Œéœ€[é…ç½®](#%EF%B8%8F-weather-cron-é…ç½®)

## æ”¯æŒçš„ Webhook

- [x] GitHub ä»“åº“ Webhookï¼Œéœ€[é…ç½®](#%EF%B8%8F-github-webhook-é…ç½®)

> [!NOTE]
> éœ€è¦åœ¨ GitHub ä»“åº“ Settings ä¸­æ·»åŠ  Webhook

## é…ç½®æ–‡ä»¶

é¡¹ç›®æ ¹ç›®å½•ä¸­çš„ `config.ini.example` ä¸ºé…ç½®æ–‡ä»¶æ¨¡ç‰ˆï¼Œé¦–æ¬¡å¯åŠ¨é¡¹ç›®å‰éœ€è¦å¤åˆ¶ä¸€ä»½é…ç½®æ–‡ä»¶ï¼Œå¹¶å‘½åä¸º `config.ini`ã€‚ ç¼–è¾‘ `config.ini`ã€‚

ä¸‹è¡¨ä¸ºé…ç½®é¡¹è§£é‡Šï¼š

### âš™ï¸ WeChatter é…ç½®

| é…ç½®é¡¹ | è§£é‡Š | å¤‡æ³¨ |
| --- | --- |  --- |
| `wechatter_port` | WeChattteræœåŠ¡å™¨çš„ç«¯å£ï¼Œæ¥å—æ¶ˆæ¯çš„ç«¯å£ | é»˜è®¤ä¸º `4000`ï¼Œéœ€å’Œ `wxbotwebhook` Docker çš„ `RECV_MSG_API` å‚æ•°çš„ç«¯å£ä¸€è‡´ |

### âš™ï¸ WxBotWebhook é…ç½®

| é…ç½®é¡¹ | è§£é‡Š | å¤‡æ³¨ |
| --- | --- |  --- |
| `wx_webhook_host` | å‘é€æ¶ˆæ¯çš„åœ°å€ | é»˜è®¤ä¸º `localhost`ï¼Œéœ€å’Œ `wxBotWebhook` çš„ Docker IP åœ°å€ä¸€è‡´ |
| `wx_webhook_port` | å‘é€æ¶ˆæ¯çš„ç«¯å£ | é»˜è®¤ä¸º `3001`ï¼Œéœ€å’Œ `wxBotWebhook` çš„ Docker ç«¯å£ä¸€è‡´ |
| `wx_webhook_recv_api_path` | æ¥æ”¶æ¶ˆæ¯çš„æ¥å£è·¯å¾„ | é»˜è®¤ä¸º `/receive_msg`ï¼Œæ­¤è·¯å¾„ä¸º `RECV_MSG_API` çš„è·¯å¾„ |

### âš™ï¸ Admin é…ç½®

| é…ç½®é¡¹ | è§£é‡Š | å¤‡æ³¨ |
| --- | --- |  --- |
| `admin_list` | è®¾ç½®ç®¡ç†å‘˜,ç”¨äºæ¥æ”¶æœºå™¨äººçŠ¶æ€å˜åŒ–é€šçŸ¥ | å¡«å…¥ç®¡ç†å‘˜å¾®ä¿¡åï¼ˆä¸æ˜¯å¤‡æ³¨ï¼‰ |
| `admin_group_list` | ä¸ `admin_list` åŒç†ï¼Œæ¥æ”¶æœºå™¨äººçŠ¶æ€å˜åŒ–é€šçŸ¥ | å¡«å…¥ç¾¤åç§°ï¼ˆä¸æ˜¯ç¾¤å¤‡æ³¨ï¼‰ |

### âš™ï¸ Bot é…ç½®

| é…ç½®é¡¹ | è§£é‡Š | å¤‡æ³¨ |
| --- | --- |  --- |
| `bot_name` | å¾®ä¿¡æœºå™¨äººçš„åå­— | å¾®ä¿¡åç§°ï¼Œéå¾®ä¿¡å· |

### âš™ï¸ Chat é…ç½®

| é…ç½®é¡¹ | è§£é‡Š | å¤‡æ³¨ |
| --- | --- |  --- |
| `command_prefix` | æœºå™¨äººå‘½ä»¤å‰ç¼€ | é»˜è®¤ä¸º `/` ï¼Œå¯ä»¥è®¾ç½®ä¸º`>>`ã€`!` ç­‰ |
| `need_mentioned` | ç¾¤èŠä¸­çš„å‘½ä»¤æ˜¯å¦éœ€è¦@æœºå™¨äºº | é»˜è®¤ä¸º `True` |

### âš™ï¸ Copilot GPT4 é…ç½®

| é…ç½®é¡¹ | è§£é‡Š |  å¤‡æ³¨ |
| --- | --- |  --- |
| `cp_gpt4_api_host` | CopilotGPT4 æœåŠ¡çš„APIåœ°å€ | é»˜è®¤ä¸º `http://localhost` |
| `cp_gpt4_port` | CopilotGPT4 æœåŠ¡çš„ç«¯å£ | é»˜è®¤ä¸º `8080` |
| `cp_token` | Copilot çš„ Token | ä»¥ `ghu_` å¼€å¤´çš„å­—ç¬¦ä¸² |

### âš™ï¸ GitHub Webhook é…ç½®

| é…ç½®é¡¹ | è§£é‡Š | å¤‡æ³¨ |
| --- | --- |  --- |
| `github_webhook_enabled` | åŠŸèƒ½å¼€å…³ï¼Œæ˜¯å¦æ¥æ”¶ GitHub Webhook | é»˜è®¤ä¸º `False` |
| `github_webhook_api_path` | æ¥æ”¶ GitHub Webhook çš„æ¥å£è·¯å¾„ | é»˜è®¤ä¸º `/webhook/github` |
| `github_webhook_receiver_list` | æ¥æ”¶ GitHub Webhook çš„å¾®ä¿¡ç”¨æˆ· |  |
| `github_webhook_receive_group_list` | æ¥æ”¶ GitHub Webhook çš„å¾®ä¿¡ç¾¤ | |

### âš™ï¸ Message Forwarding é…ç½®

| é…ç½®é¡¹ | å­é¡¹ | è§£é‡Š | å¤‡æ³¨ |
| --- | --- |  --- | --- |
| `message_forwarding_enabled` | | åŠŸèƒ½å¼€å…³ï¼Œæ˜¯å¦å¼€å¯æ¶ˆæ¯è½¬å‘ | é»˜è®¤ä¸º `False` |
| `message_forwarding_rules` | | æ¶ˆæ¯è§„åˆ™åˆ—è¡¨ï¼Œæ¯ä¸ªè§„åˆ™åŒ…å«ä¸‰ä¸ªå­—æ®µï¼š`froms`, `to_persons` å’Œ `to_groups` | è§„åˆ™æ˜¯ç”±å­—å…¸ç»„æˆçš„JSONåˆ—è¡¨ï¼Œæœ€åçš„ `]` ä¸èƒ½å•ç‹¬ä¸€è¡Œ |
| â¤â¤â¤ | `froms` | æ¶ˆæ¯è½¬å‘æ¥æºåˆ—è¡¨ï¼Œå³æ¶ˆæ¯å‘é€è€… | å¯ä»¥å¡«å¤šä¸ªç”¨æˆ·åç§°æˆ–ç¾¤åç§° |
| â¤â¤â¤ | `to_persons` | æ¶ˆæ¯è½¬å‘ç›®æ ‡ç”¨æˆ·åˆ—è¡¨ï¼Œå³æ¶ˆæ¯æ¥æ”¶ç”¨æˆ· | å¯ä»¥å¡«å¤šä¸ªç”¨æˆ·åç§°æˆ–ä¸ºç©ºåˆ—è¡¨ |
| â¤â¤â¤ | `to_groups` | æ¶ˆæ¯è½¬å‘ç›®æ ‡ç¾¤åˆ—è¡¨ï¼Œå³æ¶ˆæ¯æ¥æ”¶ç¾¤ | å¯ä»¥å¡«å¤šä¸ªç¾¤åç§°æˆ–ä¸ºç©ºåˆ—è¡¨ |

### âš™ï¸ Weather Cron é…ç½®

| é…ç½®é¡¹ | è§£é‡Š | å¤‡æ³¨ |
| --- | --- |  --- |
| `weather_cron_enabled` | åŠŸèƒ½å¼€å…³ï¼Œæ˜¯å¦å¼€å¯å®šæ—¶å¤©æ°”æ¨é€ | é»˜è®¤ä¸º `False` |
| `weather_cron_rules` | æ¨é€è§„åˆ™åˆ—è¡¨ï¼Œæ¯ä¸ªè§„åˆ™åŒ…å«ä¸¤ä¸ªå­—æ®µï¼š`cron` å’Œ `tasks` | è§„åˆ™æ˜¯ç”±å­—å…¸ç»„æˆçš„JSONåˆ—è¡¨ |

å…³äº`cron`å’Œ`tasks`çš„é…ç½®è§[Weather Cron é…ç½®è¯¦ç»†](docs/config_detail.md#weather-cron-é…ç½®è¯¦ç»†)

## æ’ä»¶åŒ–

> [!NOTE]
> å¼€å‘ä¸­...

> [!WARNING]
> æœ¬é¡¹ç›®ä»åœ¨å¼€å‘ä¸­ï¼Œæ¬¢è¿æå‡ºå»ºè®®å’Œæ„è§ã€‚
